import{G as J,$ as q,r as c,z as re,R as ce,B as W,C as ue,aK as de,H as h,aA as ve,N as l,I as r,J as e,P as i,O as n,ao as p,au as U,av as m,Q as y,ap as O,K as $,M as j,ax as A,aB as pe,V as he,aC as ye,aD as _e}from"./common.modules-f9fa5dc7.js";import{a1 as fe,m as ge,y as me,a as we,i as ke,c as H,b as w,A as Ce,a2 as be,_ as De}from"./page-activity-ActivityDetail-5a5f2722.js";import{C as Ae}from"./page-activity-Championship-a16bb0a5.js";import{E as $e}from"./page-activity-Bonus-4129face.js";const Se=_=>(ye("data-v-4a7709f3"),_=_(),_e(),_),Te={class:"activity-wrapper"},Re={class:"activity-banner"},Be={class:"activity-bonus"},Ie={class:"activity-panel"},Pe={class:"msg-window"},Ue={class:"msg-header"},Oe={class:"msg-footer"},Le=Se(()=>e("div",{class:"nowidth"},null,-1)),Ee=["onClick"],Ne={class:"activity-panel-content"},xe={class:"content-para"},Fe={class:"content-para"},Ge={key:0,class:"cardBox"},Me={class:"activitySection__container"},ze=["onClick"],Ve=["src","onError"],qe={class:"box-content"},We={class:"box-title"},je={class:"dialog-window"},He={class:"dialog-wrapper"},Je={class:"dialog-title"},Ke={class:"dialog-para"},Qe=J({__name:"index",props:{activityList:{type:Array,default:()=>{}}},setup(_){const{getSelfCustomerServiceLink:L}=fe({ServerType:2}),{ActiveSotre:o,saveUserGuidelines:S,saveUserDayRequest:K,getDailyAwardCount:Q,allUnAwardCount:T,getActive:X}=ge(),Y=me(),{championEntranceV:R,championEntranceVO:E}=we(),{isOpenInvitedWheel:Z}=ke();q(()=>o.value.isOpenChampion,a=>{a==1&&R()});const k=c(!1);q(k,a=>{k.value&&R()});const N=c(!0),x=c(!0),F=c([]),{t:u}=re(),B=c(!1),I=c(!1),P=c(1),G=c(!1),v=ce(),M=W(()=>[{name:u("actTip1"),icon:"a1",goPath:"DailyTasks",noread:T.value,show:o.value.isOpenActivityAward},{name:u("invitationBonus"),icon:"a2",goPath:"InvitationBonus",noread:0,show:o.value.isTaskState},{name:u("laundryAmount"),icon:"a3",goPath:"Laundry",noread:0,show:o.value.isOpenWashCode},{name:u("superjackpot"),icon:"a4",goPath:"SuperJackpot",noread:o.value.unJackpotCount,show:o.value.isOpenJackpotReward},{name:u("newMenberPackage"),icon:"a5",goPath:"MemberPackage",noread:0,show:o.value.newMemberGiftPackageSwitch},{name:u("inviteWheel"),icon:"a6",goPath:"turntable",noread:0,show:Z.value}]),ee=W(()=>M.value.filter(a=>a.show).length);function ae(a){let t;const{bannerID:d,jumpType:C,contents:g}=a;if(C==2){if(g.startsWith("/")){v.push({path:g});return}window.location.assign(g);return}else if(C==5)return L();switch(d){case 1:t="DailyTasks";break;case 2:t="PointMall";break;case 3:t="InvitationBonus";break;default:t="ActivityDetail";break}t=="ActivityDetail"?v.push({name:t,query:{id:d}}):t&&v.push({name:t})}const te=(a,t)=>{a.bannerUrl=w("images","avatar"),he(()=>{let d=document.querySelector(`.act_${t}`);d.src=a.bannerUrl,d.style.objectFit="contain"})},f=a=>{v.push({name:a})},se=()=>{S(),f("DailyTasks")},z=()=>{x.value=!1,N.value=!1},V=(a=null)=>{K(),a&&(z(),f("DailyTasks"))},ne=async()=>{const a=await Ce(be({pageNo:P.value,pageSize:20}));a?(a.data.totalCount==0&&(G.value=!0),a.data.totalPage<=P.value&&(I.value=!0),a.data.list&&F.value.push(...a.data.list),P.value++):I.value=!0,B.value=!1};return ue(async()=>{await X(),o.value.isOpenActivityAward&&Q(),o.value.isOpenChampion==1&&R()}),de(()=>{x.value=!1,N.value=!1}),(a,t)=>{const d=h("van-icon"),C=h("van-popover"),g=h("van-badge"),oe=h("van-list"),ie=h("van-dialog"),b=ve("lazy");return l(),r("div",Te,[e("div",Re,[e("ul",Be,[e("li",null,[e("p",null,i(a.$t("todayRewards")),1),e("h3",null,i(n(H)(n(o).todayRewards)),1)]),e("li",null,[e("p",null,i(a.$t("totalRewards")),1),e("h3",null,i(n(H)(n(o).totalRewards)),1)])]),n(Y).getIsShowRewardCenter?(l(),r("div",{key:0,class:"bonus-button",onClick:t[0]||(t[0]=s=>n(v).push({name:"Bonus"}))},i(a.$t("bonusDetails")),1)):p("v-if",!0)]),e("div",Ie,[n(o).isFinishUserGuidelines&&n(o).isOpenActivityAward?(l(),U(C,{key:0,show:n(o).isFinishUserGuidelines,"onUpdate:show":t[1]||(t[1]=s=>n(o).isFinishUserGuidelines=s),overlay:!0,placement:"top-start","close-on-click-overlay":!1,onClose:z,class:"arPopover"},{reference:m(()=>[Le]),default:m(()=>[e("div",Pe,[e("div",Ue,i(a.$t("activityTip8")),1),e("div",Oe,[e("div",{onClick:se},[e("span",null,i(a.$t("dragonEntry")),1),y(d,{name:"arrow-double-right",color:"var(main-color)"})])])])]),_:1},8,["show"])):p("v-if",!0),e("div",{class:O(["activity-panel-header",["lg"+ee.value]])},[(l(!0),r($,null,j(M.value,s=>(l(),r($,null,[s.show?(l(),r("div",{key:0,class:"header-item",onClick:D=>f(s.goPath)},[y(g,{content:s.noread,max:"99","show-zero":s.noread>0,color:"#FA5B5B"},{default:m(()=>[e("div",{class:O([s.icon,"bgcontainer"])},null,2)]),_:2},1032,["content","show-zero"]),e("span",null,i(s.name),1)],8,Ee)):p("v-if",!0)],64))),256))],2),e("div",Ne,[e("div",{class:"content-title",onClick:t[2]||(t[2]=s=>f("RedeemGift"))},[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","signInBanner")]]),e("div",xe,i(a.$t("giftExchange")),1),e("p",null,i(a.$t("activityTip3")),1)]),e("div",{class:"content-title",onClick:t[3]||(t[3]=s=>f("DailySignIn"))},[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","giftRedeem")]]),e("div",Fe,i(a.$t("code8007")),1),e("p",null,i(a.$t("activityTip4")),1)])])]),n(o).isOpenChampion==1?(l(),r("div",Ge,[y(Ae,{itemD:n(E),state:n(E).state,isRefresh:k.value,"onUpdate:isRefresh":t[4]||(t[4]=s=>k.value=s),bgImgWidth:"100%",bgImgHeight:"150px",onClick:t[5]||(t[5]=()=>n(v).push({name:"Championship"}))},null,8,["itemD","state","isRefresh"])])):p("v-if",!0),y(oe,{loading:B.value,"onUpdate:loading":t[6]||(t[6]=s=>B.value=s),finished:I.value,"finished-text":n(u)("noMoreThere"),onLoad:ne},{default:m(()=>[e("div",Me,[(l(!0),r($,null,j(F.value,(s,D)=>(l(),r("div",{class:"box",key:D,onClick:le=>ae(s)},[e("img",{src:s.bannerUrl,class:O(`act_${D}`),onError:le=>te(s,D)},null,42,Ve),e("div",qe,[e("div",We,i(s.bannerTitle),1)])],8,ze))),128))])]),_:1},8,["loading","finished","finished-text"]),G.value?(l(),U($e,{key:1})):p("v-if",!0),n(T)>0&&n(o).isOpenActivityAward?(l(),U(ie,{key:2,show:n(o).isFirstUserDayRequest,"onUpdate:show":t[9]||(t[9]=s=>n(o).isFirstUserDayRequest=s),"show-confirm-button":!1,className:"noOverHidden"},{default:m(()=>[e("div",je,[e("div",He,[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","present")]]),e("div",Je,[pe(i(a.$t("activityTip5"))+" ",1),e("span",null,i(n(T)),1)]),e("div",Ke,i(a.$t("activityTip6")),1),e("div",{class:"dialog-btn",onClick:t[7]||(t[7]=s=>V(!0))},i(a.$t("activityTip7")),1),e("div",{class:"dialog-footer",onClick:t[8]||(t[8]=s=>V())},[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","close")]])])])])]),_:1},8,["show"])):p("v-if",!0)])}}});const Xe=De(Qe,[["__scopeId","data-v-4a7709f3"],["__file","/usr/local/jenkins-prod/workspace/AR081-Pages-Bengal-dkwin/src/components/Activity/Section/index.vue"]]),ta=J({__name:"index",setup(_){return(L,o)=>{const S=h("NavBar");return l(),r($,null,[y(S,{class:"main",headLogo:!0}),y(Xe)],64)}}});export{ta as _};
