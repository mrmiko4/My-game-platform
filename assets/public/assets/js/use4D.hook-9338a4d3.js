import{a4 as _t,A as h,ez as Ht,eA as zt,eB as Ut,eC as $t,eD as qt,eE as Jt,eF as Kt,eG as Xt,eH as Zt,eI as te}from"./page-activity-ActivityDetail-5a5f2722.js";import{r,A as ee,w as z,z as ae,B as u,E as le,u as A}from"./common.modules-f9fa5dc7.js";const U=r(!1),S=r(!1),$=r(0),R=r(),q=r();function oe(){const e=ee({timeVal:z().format("YYYY-MM-DD"),timeIndex:0,lotteryList:[],lotteryTab:[],tabId:1,rollNum:0,betQuantity:0,betAmount:0,totalAmount:0,betType:[],betTypeList:[],betPay:1,betPayList:[],dupleList:[{list:[]},{list:[]},{list:[]},{list:[]}],allActive:[],banbetpay:0,multipleList:[1,5,10,20,50,100],betAmountList:[10,50,100,500,1e3,5e3],duplex:!1,balance:0,stopTime:null}),{t:c}=ae(),{setLoading:m}=_t(),y=r(""),g=r(1),w=r(!0),J=r(!1),x=r(!1),D=r([{}]),M=r(),k=r(),K=[{name:c("xosoTxt90"),type:0},{name:c("xosoTxt89"),type:1},{name:c("xosoTxt88"),type:2},{name:c("xosoTxt87"),type:3}],X=u(()=>e.timeVal),Z=u(()=>e.timeIndex),tt=u(()=>e.lotteryList),et=u(()=>e.lotteryTab),at=u(()=>e.tabId),lt=u(()=>e.rollNum),nt=u(()=>e.betType),st=u(()=>e.betTypeList),ot=u(()=>e.betPay),it=u(()=>e.betPayList),ut=u(()=>e.betAmount),ct=u(()=>e.totalAmount),yt=u(()=>e.betQuantity),bt=u(()=>e.banbetpay),pt=u(()=>e.dupleList),rt=u(()=>e.allActive),mt=u(()=>e.multipleList),dt=u(()=>e.betAmountList),ft=u(()=>e.duplex),gt=u(()=>e.balance),Tt=t=>{const a=[c("Sunday"),c("Monday"),c("Tuesday"),c("Wednesday"),c("Thursday"),c("Friday"),c("Saturday")],l=new Date(t);return a[l.getDay()]},ht=(t,a)=>{e.timeIndex=a,e.timeVal=t.date,I(1),U.value=!1},vt=(t,a)=>{if(e.lotteryList.includes(t.type)){let l=e.lotteryList.indexOf(t.type);e.lotteryList.splice(l,1)}else e.lotteryList.push(t.type);d(e.betType.length,e.betAmount,e.betPay)},Lt=t=>{e.tabId=t,I(0)},I=t=>{y.value="",e.betPay=1,e.rollNum=0,e.betType.length=0,e.betAmount=e.betAmountList[0],e.dupleList.forEach(a=>a.list=[]),e.allActive.length=0,g.value=1,B(),x.value=!1,t==1&&(e.lotteryList.length=0)},B=()=>{e.totalAmount=0,e.betQuantity=0,e.banbetpay=0},At=()=>{if(e.rollNum>=2||y.value.length>=4)return A(c("EnterTip"));e.betPay=5,y.value+="R",e.rollNum=E(y.value.split("")),console.log(y.value),d(e.betType.length,e.betAmount,e.betPay)},Pt=t=>{y.value=t.target.value,y.value==""&&(e.betPay=1),y.value.length!==4?B():Y(t.target.value)?(d(e.betType.length,e.betAmount,e.betPay),e.banbetpay=N(y.value),e.banbetpay===1&&(e.betPay=1)):(y.value="",e.betPay=1,A(c("FormatTip1"))),e.rollNum=E(y.value.split(""))},xt=t=>{if(t.target.value==""||t.target.value.length!==4)return;Y(t.target.value)||(y.value="",e.betPay=1,A(c("FormatTip1")))},Y=t=>/^[0-9]{4}|\R[0-9]{3}|[0-9]{1}\R[0-9]{2}|[0-9]{2}\R[0-9]{1}|\R[0-9]{2}\R|[0-9]{2}\R{2}|\R{2}[0-9]{2}|[0-9]{3}\R|[0-9]\R{2}[0-9]|[0-9]\R[0-9]\R|\R[0-9]\R[0-9]$/.test(t),E=t=>{let a=t.indexOf("R"),l=0;for(;a!==-1;)l++,a=t.indexOf("R",a+1);return l},It=t=>{const{betType:a,betAmount:l,betPay:n}=e;if(a.includes(t)){let o=a.indexOf(t);a.splice(o,1)}else a.push(t);d(a.length,l,n)},Nt=t=>{e.betPay=t,d(e.betType.length,e.betAmount,t)},Rt=t=>{e.betAmount=t,d(e.betType.length,t,e.betPay)},d=(t,a,l)=>{let{tabId:n,dupleList:o,lotteryList:s}=e;if(n===1){if(y.value.length!==4)return!1;j(t,a,y.value,l)}else if(L(o))e.betQuantity=C(o)*s.length*e.betType.length,e.totalAmount=e.betQuantity*a*s.length*g.value;else{const p=o.map(i=>i.list[0]).join("");if(p.length!==4)return;e.banbetpay=N(p),j(t,a,p,l)}},j=(t,a,l,n)=>{let{rollNum:o,lotteryList:s}=e,p=t*a*s.length*g.value,i=t*s.length,b=0,f=0;if(n===1||n===2)b=p,f=i;else if(n===3){const v=N(l);b=p*v,f=i*v}else if(n===4){const v=wt(l);b=p*(v?1:2),f=i*(v?1:2)}else n===5&&(b=p*(o>0?o==1?10:10*10:0),f=i*(o>0?o==1?10:10*10:0));e.totalAmount=b,e.betQuantity=f},wt=t=>t===t.split("").reverse().join("");function N(t){function a(i){return i<=1?1:i*a(i-1)}let l=t.split("").map(Number),n=[...new Set(l)],o=a(l.length),s=1;for(const i of n){const b=l.filter(f=>f===i).length;s*=a(b)}return o/s}const Dt=t=>{const{dupleList:a,allActive:l,betType:n,betAmount:o}=e;if(a[t].list=[],l.includes(t)){let s=l.indexOf(t);l.splice(s,1)}else{l.push(t);for(let s=0;s<10;s++)a[t].list.push(s)}F(),d(n.length,o)},Bt=(t,a)=>{const{dupleList:l,allActive:n,betType:o,betAmount:s,betPay:p}=e,i=l[t].list;if(i.includes(a)){let b=i.indexOf(a);i.splice(b,1)}else i.push(a);if(i.length===10)n.push(t);else if(n.includes(t)){let b=n.indexOf(t);n.splice(b,1)}if(F(),C(l)>0){if(d(o.length,s,p),C(l)===1){const b=l.map(f=>f.list[0]).join("");e.banbetpay=N(b)}e.banbetpay===1&&(e.betPay=1)}else L(l)?e.banbetpay=L(l)?1:0:B()},F=()=>{const{dupleList:t}=e;e.duplex=L(t),e.banbetpay=L(t)?1:0,L(t)&&(e.betPay=1)};function L(t){for(let a=0;a<t.length;a++){const l=t[a].list;if(Array.isArray(l)&&l.length>1)return!0}return!1}function C(t){let a=1;return t.forEach((l,n)=>{a*=l.list.length}),a}const Ct=()=>{x.value=!0},Ot=t=>{const{betType:a,betAmount:l,betPay:n}=e;switch(t){case 1:g.value>1&&g.value--;break;case 2:g.value++;break}d(a.length,l,n)},Gt=t=>{const{betType:a,betAmount:l,betPay:n}=e;g.value=t.target.value,d(a.length,l,n)},Qt=t=>{const{betType:a,betAmount:l,betPay:n}=e;g.value=t,d(a.length,l,n)},St=t=>{console.log(t),w.value=t},Mt=()=>{const{lotteryList:t,lotteryTab:a,timeIndex:l,tabId:n,betPay:o,betType:s,betQuantity:p,betAmount:i,dupleList:b,totalAmount:f,balance:v}=e;if(f>v)return A(c("wfDesc3"));if(p/t.length>7e3)return A(c("d4BetTip",[7e3]));if(!w.value)return A(c("agreePresaleRules"));let T={};T.type=t,T.gameType=o;let O="";n===1?O=y.value:O=b.map(G=>G.list.sort((P,Q)=>P-Q).join(",")).join("|"),T.betContent=O,T.betType=s,T.betMethod=n,T.betNumber=p,T.multiple=Number(g.value),T.amount=i,T.issueNumber=t.map(G=>{const P=a[l].games.find(Q=>Q.type===G);return P==null?void 0:P.issueNumber}),x.value=!1,Yt(T),V()},V=()=>{setTimeout(()=>{S.value=!1},1500)},W=async()=>{const t=await h(Ht());t!=null&&t.data&&(e.balance=(t==null?void 0:t.data.amount)||0)},kt=async()=>{const t=await h(zt());t!=null&&t.data&&(e.multipleList=(t==null?void 0:t.data.betMultiplier)||[],e.betAmountList=(t==null?void 0:t.data.betAmount)||[],e.betTypeList=(t==null?void 0:t.data.betType)||[],e.betPayList=(t==null?void 0:t.data.gameType)||[],e.betAmount=(t==null?void 0:t.data.betAmount[0])||0)},_=async()=>{m(!0);const t=await h(Ut());t!=null&&t.data&&(e.timeVal=t.data[e.timeIndex].date,e.lotteryTab=(t==null?void 0:t.data)||[]),m(!1)},Yt=async t=>{const a=await h($t(t));(a==null?void 0:a.code)===0?(S.value=!0,W(),$.value===1&&H({pageSize:10,pageNo:1,type:0,date:z(new Date).format("YYYY-MM-DD")+" 00:00:00"}),V()):_(),I(1)},Et=async()=>{m(!0),D.value.length=0;const t=await h(qt());t!=null&&t.data&&(t==null||t.data.forEach(a=>{let l=[],n=[],o=[];a.items.forEach(s=>{s.playId.split("_").length==1?o.push({...s,code:s.playId}):(s.playId.split("_")[0]=="1"&&l.push({...s,code:s.playId.split("_")[1]}),s.playId.split("_")[0]=="2"&&n.push({...s,code:s.playId.split("_")[1]}))}),D.value.push({playTypeId:a.playTypeId,playTypeTitle:a.playTypeTitle,lists:[{type:1,list:l},{type:2,list:n},{type:3,list:o}]})})),m(!1)},jt=async()=>{if(R.value)return;m(!0);const t=await h(Jt());t!=null&&t.data&&(R.value=t.data.map(a=>(a.typeName=c(`d4LType${a.typeId}`),a)),R.value.unshift({typeId:0,typeName:c("all")})),m(!1)},H=async t=>{m(!0);const a=await h(Kt(t));a!=null&&a.data&&(q.value=(a==null?void 0:a.data)||{}),m(!1)},Ft=async()=>{m(!0);const t=await h(Xt());t!=null&&t.data&&(M.value=(t==null?void 0:t.data)||[]),m(!1)},Vt=async t=>{m(!0);const a=await h(Zt(t));a&&(k.value=(a==null?void 0:a.data)||{}),m(!1)},Wt=async t=>{const a=await h(te(t));return new Promise(async(l,n)=>{a?l(a):n(a)})};return le(()=>{clearInterval(e.stopTime)}),{tabList:K,getTimeWeek:Tt,onTime:ht,lotterTab:vt,onTab:Lt,getClear:I,onRoll:At,getInput:Pt,getBlur:xt,onBetType:It,onBetpay:Nt,onAmount:Rt,onClickBet:Ct,addNumber:Bt,allAddnum:Dt,onStepper:Ot,changeStep:Gt,onMltiple:Qt,checkboxChange:St,onBet:Mt,getWinsUserAmount:W,getGameConfig:kt,getGameIssue:_,getOddsList:Et,getTypeList:jt,getMy4DHistory:H,get4DResult:Ft,gameResultByType:Vt,gameCancelOrder:Wt,gameListIndex:$,timeVal:X,lotteryTab:et,timeIndex:Z,lotteryList:tt,timeShow:U,betShow:x,tabId:at,rollNum:lt,banbetpay:bt,num:y,betType:nt,betTypeList:st,betPay:ot,betPayList:it,count:ut,totalAmount:ct,betQuantity:yt,allActive:rt,dupleList:pt,countVal:g,checked:w,preSaleRule:J,multipleList:mt,betAmountList:dt,duplex:ft,balance:gt,promptShow:S,oddsList:D,typeList:R,myHistory:q,newGameResult:M,gameResultByTypeO:k}}export{oe as u};
