import{G,aS as H,z as J,R as Y,A as B,r as w,C as X,a7 as Z,u as d,$ as ee,H as N,I as h,Q as f,av as T,O as m,J as t,P as o,ao as p,K as te,aB as b,ax as D,aF as A,au as ae,aC as se,aD as oe,F as ne,N as v,p as le}from"./common.modules-f9fa5dc7.js";import{V as ie}from"./page-arupi-Appeal-c9faa941.js";import{S as re,s as de,B as pe}from"./page-arupi-kycAppeal-eee714de.js";import{ad as ce,aj as ue,ah as me,az as ve,aC as ge,aB as he,_ as be}from"./page-activity-ActivityDetail-5a5f2722.js";import"./page-turntable-assets-d6267459.js";import"./native/index-eb46cb93.js";import"./en-cfd26acf.js";const k=x=>(se("data-v-c1c64bb8"),x=x(),oe(),x),fe={class:"x-appeal"},ke={key:0,class:"x-appeal-box"},_e={class:"appealTip"},ye={class:"title"},we={key:0,class:"x-tc pt60"},xe={class:"mb5"},Ie={class:"sub"},$e={key:1,class:"x-appeal-box"},Ce={class:"tit mb4"},Ne={class:"txt mb24"},Te=k(()=>t("br",null,null,-1)),Se=k(()=>t("br",null,null,-1)),Be={class:"item mb16"},De=k(()=>t("h1",{class:"mb5"},[t("span",{style:{color:"#EE4D4D"}},"*"),b(" UTR(UPI Ref.ID) ")],-1)),Ae=["placeholder"],Ve={class:"item mb16"},Re={class:"mb5"},Ue=k(()=>t("span",{style:{color:"#EE4D4D"}},"*",-1)),Ee=["readonly","placeholder"],Le={key:0,class:"item mb16"},Fe=k(()=>t("h1",{class:"mb5"},[t("span",{style:{color:"#EE4D4D"}},"*"),b(" UPI ID ")],-1)),Pe=["placeholder"],Oe={key:1,class:"item mb16"},Ke={class:"mb5"},ze=k(()=>t("span",{style:{color:"#EE4D4D"}},"*",-1)),Me={class:"uploadImg x-row x-column x-row-middle-center"},Qe={class:"x-row x-row-between x-row-middle fooder"},We={key:2,class:"x-tc pt60 existAppeal"},je={class:"mb5"},qe=G({__name:"index",setup(x){const P=new H,{goMerchant:S}=ce(),{handleOpen:V}=ue({type:3}),{t:l}=J(),R=Y(),{token:I}=R.currentRoute.value.query,_=B({title:l("buyAppeal")||"",pageIndex:1}),$=w(!1),i=B({bankList:[],pageId:1,msg:0}),C=w(""),s=B({upiName:"",upiId:"",verificationCode:"",bankCardNumber:"",bankCardOwner:"",bankCode:"",bankName:"",email:"",ifscCode:"",mobileNumber:"",type:3,utrVal:""}),U=w(!1),y=w(!1),O=async(e,a)=>{C.value=e.content},K=async()=>{const e=await ve({token:I,source:2});e.code==="1"?i.bankList=e.data:d(e.msg)};X(()=>{K(),q()});const z=e=>{_.title=e},M=e=>{_.pageIndex=e},E=w(),Q=(e,a)=>{const{bankName:u,bankCode:r}=e;s.bankName=u,s.bankCode=r,s.verificationCode="",i.pageId=2,M(2)},W=e=>{console.log(e,"url");const a=e.match(/=([^&@]+@airtel)/);return a?a[1]:null},L=Z(async()=>{const{mobileNumber:e,bankCode:a,verificationCode:u,utrVal:r,upiId:g}=s;if(!a)return d(l("pSelectKyc"));if(!r||r.length<12||!/^\d+$/.test(r))return d(l("formatIncorrect"));if(!e)return d(l("pphone"));if(i.msg==0&&e.length<8)return d(l("xg19"));if(s.bankCode==="airtel"){if(!g)return d(l("phEnterUPIID"));if(!C.value)return d(l("withdrawQrcodeTips"));try{const c=document.querySelector(".uploadImg img"),n=await P.decodeFromImageElement(c);if(g!==W(n.text))return d(l("upiUploadImg"))}catch(c){return console.error(c,C.value),d(l("upiUploadImg"))}}if(i.msg==0)return i.msg=1;if(!u)return d(l("pcode"));j()},500),j=async()=>{const{mobileNumber:e,bankCode:a,verificationCode:u,utrVal:r,upiId:g}=s,c=await ge({bankCode:a,otp:u,phoneNumber:e,token:I,type:1,response:E.value.kycMsg,utr:r,upiId:g});c.code==="1"?(ne(l("xg22")),setTimeout(()=>{S()},1500)):d(c.msg)},q=async()=>{const e=await me({token:I});if(e.code==="1"){const{isLink:a,orderStatus:u,existAppeal:r,isAutoFlag:g=!0,url:c}=e.data;U.value=a,s.utrVal=c,!a&&r&&g&&($.value=!0),r&&!$.value&&(y.value=!0),u==10&&!a&&S()}else d(e.msg),setTimeout(()=>{S()},1500)};ee(()=>[_.pageIndex],()=>{i.pageId=_.pageIndex,i.msg=0,s.verificationCode="",s.mobileNumber="",z(_.pageIndex===1?l("buyAppeal"):l("xg91"))});function F(){R.push({name:"Recharge"})}return(e,a)=>{const u=N("NavBar"),r=N("van-skeleton"),g=N("van-image"),c=N("van-uploader");return v(),h("div",fe,[f(u,{title:m(l)("arupiBank"),placeholder:!1,"left-arrow":"",onClickLeft:F},{right:T(()=>[t("div",{class:"sever x-row x-row-between x-row-middle-center",onClick:a[0]||(a[0]=(...n)=>m(V)&&m(V)(...n))},o(e.$t("customerService")),1)]),_:1},8,["title"]),i.pageId==1&&!y.value?(v(),h("div",ke,[t("div",_e,[t("div",ye,o(e.$t("arupiBank")),1),t("p",null,"1 "+o(e.$t("platformArrival"))+";",1),t("p",null,"2 "+o(e.$t("followingWallets"))+";",1),t("p",null,"3 "+o(e.$t("throughOTP"))+";",1)]),p(" 申诉中且还在连接状态 "),U.value?(v(),h("div",we,[t("h2",xe,o(e.$t("orderAppealed")),1),t("h2",null,o(e.$t("orderWait")),1)])):(v(),h(te,{key:1},[p(" 如果没有申诉过或者断联 "),t("div",null,[t("h1",Ie,o(e.$t("xg88")),1),p(` <p class="text">{{ $t('xg89') }}</p> `),f(r,{title:"",row:8,loading:!i.bankList.length},{default:T(()=>[f(pe,{list:i.bankList,onOnSelect:Q},null,8,["list"])]),_:1},8,["loading"])])],2112)),p(` <div class="x-appeal-box-btn">
                <div @click="goAppeal">{{ $t('xg90') }}</div>
            </div> `)])):i.pageId!==1&&!y.value?(v(),h("div",$e,[f(re,{type:"kyc",active:i.msg,releaseOrderFlag:!1},null,8,["active"]),t("h3",Ce,o(e.$t("welcomAuthorize"))+" "+o(s.bankName),1),t("p",Ne,[b(o(e.$t("enjoyWork")),1),Te,b(" 1."+o(e.$t("enterYournumber",[s.bankName]))+";",1),Se,b(" 2."+o(e.$t("nextTip"))+".",1)]),t("div",Be,[De,D(t("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=n=>s.utrVal=n),placeholder:e.$t("enterUtr"),maxlength:12},null,8,Ae),[[A,s.utrVal,void 0,{trim:!0}]])]),t("div",Ve,[t("h1",Re,[Ue,b(" "+o(e.$t("phoneNumber")),1)]),D(t("input",{type:"text","onUpdate:modelValue":a[2]||(a[2]=n=>s.mobileNumber=n),readonly:!(i.bankList.length>0),placeholder:e.$t("pphone"),maxlength:10,oninput:"value=value.replace(/[^\\d]/g,'')"},null,8,Ee),[[A,s.mobileNumber,void 0,{trim:!0}]])]),s.bankCode==="airtel"?(v(),h("div",Le,[Fe,D(t("input",{type:"text","onUpdate:modelValue":a[3]||(a[3]=n=>s.upiId=n),placeholder:e.$t("phEnterUPIID"),maxlength:30},null,8,Pe),[[A,s.upiId,void 0,{trim:!0}]])])):p("v-if",!0),s.bankCode==="airtel"?(v(),h("div",Oe,[t("h1",Ke,[ze,b(" "+o(e.$t("withdrawQrcode")),1)]),f(c,{"after-read":O,"max-count":1,"max-size":5e3*1024,onOversize:a[4]||(a[4]=()=>m(le)(e.$t("sellTip14"))),accept:"image/*",name:1},{default:T(()=>[t("div",Me,[f(g,{width:"80",height:"80",fit:"cover",src:C.value},null,8,["src"]),b(" "+o(e.$t("uploadImage")),1)])]),_:1})])):p("v-if",!0),i.msg!=0?(v(),ae(de,{key:2,class:"mt16",isShowVerifyT:!1,token:m(I),code:s.verificationCode,"onUpdate:code":a[5]||(a[5]=n=>s.verificationCode=n),type:2,way:s.mobileNumber,"api-fun":m(he),ref_key:"smgFun",ref:E,isTitle:!0,times:60,"bank-code":s.bankCode},null,8,["token","code","way","api-fun","bank-code"])):p("v-if",!0),p(` <p class="mb5">* {{ $t('sellTip61') }}</p>
            <p>* {{ $t('sellTip62') }}</p> `),t("div",Qe,[t("div",{class:"cmdBth step mt32 flex1",onClick:F},o(e.$t("previousStep")),1),t("div",{class:"cmdBth active mt32 flex3",onClick:a[6]||(a[6]=(...n)=>m(L)&&m(L)(...n))},o(i.msg==0?e.$t("nextStep"):m(l)("xg91")),1)]),p(` <div class="cmdBth active mt32" @click="onRegister"> {{ pageData.msg ==0 ? $t('nextStep'):t('xg91') }}</div> `)])):p("v-if",!0),y.value?(v(),h("div",We,[t("h2",je,o(e.$t("orderAppeal")),1),t("h2",null,o(e.$t("orderWait")),1)])):p("v-if",!0),f(ie,{onClose:a[7]||(a[7]=n=>y.value=!1),show:$.value,"onUpdate:show":a[8]||(a[8]=n=>$.value=n),auto:!0,"content-class":"arupiAppealTip",btnText:e.$t("resubmit")},{default:T(()=>[t("div",null,[t("h1",null,o(e.$t("tips")),1),t("p",null,o(e.$t("arupiAppealTip")),1)])]),_:1},8,["show","btnText"])])}}});const tt=be(qe,[["__scopeId","data-v-c1c64bb8"],["__file","/usr/local/jenkins-prod/workspace/AR081-Pages-Bengal-dkwin/src/views/arupi/kycAppeal_v2/index.vue"]]);export{tt as default};
