import{G as U,z as q,r as v,R as F,B as J,$ as le,C as ie,H as R,aA as ce,I as u,Q as r,av as j,J as t,P as a,O as h,ap as I,ao as G,K as H,M as K,N as c,ax as V,aC as de,aD as ue,au as re}from"./common.modules-f9fa5dc7.js";import{m as ve,n as pe,A as m,o as _e,p as he,c as $,g as ke,b as fe,R as ye,q as ge,s as we,t as me,_ as Q,v as be,w as Te}from"./page-activity-ActivityDetail-5a5f2722.js";import{E as Ae}from"./page-activity-Bonus-4129face.js";const $e=D=>(de("data-v-d7213382"),D=D(),ue(),D),Ie={class:"dailySignIn__container"},Re={class:"task-banner"},Ce={class:"banner-title"},De={class:"banner-content"},Ne={class:"task-panel"},Se={key:0,class:"task-item"},Pe={class:"task-item-header"},Le={class:"hearder-status new"},Be={class:"headerR"},Me={class:"task-item-type"},Ge={class:"type-title new"},je={class:"type-tip"},xe={class:"task-item-description"},ze={class:"task-item-bottom"},We={class:"bottom-title"},Oe={class:"task-item-header"},He={key:0,class:"task-item-subject"},Ee={class:"sub-title"},Ve={class:"subject"},Ue={class:"schedule"},qe={class:"subject"},Fe={class:"schedule"},Je={key:1,class:"task-item-type"},Ke={class:"type-tip"},Qe={class:"task-item-description"},Xe={class:"task-item-bottom"},Ye={key:0,class:"bottom-title"},Ze={key:1,class:"bottom-title"},et={key:0},tt=$e(()=>t("span",null,"~",-1)),at=["onClick"],st={class:"dialog-window"},nt={class:"dialog-wrapper"},ot={class:"dialog-title"},lt={class:"dialog-tips"},it={class:"dialog-content"},ct=U({__name:"index",setup(D){const{t:l}=q(),w=v(!1),y=F(),{ActiveTaskMap:d,ActiveSotre:C,getActive:b}=ve();b();const{downAppTip:T}=pe(),g=v(""),N=v("0"),i=v([]),L=v([]),S=v([]),o=J(()=>{let e=[...L.value,...S.value];if(e.length==0)return[];const n=["",2,1,3];e=e.sort((f,A)=>n[f.status]-n[A.status]);const _=e.filter(f=>f.status==1);_.sort((f,A)=>M(A.schedule,A.taskTarget)-M(f.schedule,f.taskTarget));const O=e.findIndex(f=>f.status==1);return e.splice(O,_.length,..._),e}),k=async()=>{const e=await m(we());e&&(L.value=e.data.map(n=>({...n,type:"week"}))||[])},P=async()=>{const e=await m(me());e&&(S.value=e.data.map(n=>({...n,type:"day"}))||[])},B=async()=>{k(),P()},x=()=>{y.push({name:"activity"})};function M(e,n){return n==0?0:e/n*100}const p=async()=>{i.value.length=0;const e=await m(_e());e!=null&&e.data&&i.value.push(e==null?void 0:e.data)},X=e=>({1:l("goComplete"),2:l("receive"),3:l("claimed")})[e]||"",Y=e=>({1:l("undone"),2:l("complete"),3:l("complete")})[e]||"",Z=e=>({0:l("goComplete"),1:l("receive"),2:l("claimed"),3:l("claimed")})[e]||"",ee=e=>({0:l("undone"),1:l("actTip2"),2:l("claimed"),3:l("complete")})[e]||"",z=v(null),te=async e=>{z.value&&clearTimeout(z.value),z.value=setTimeout(async()=>{if(e.status==1)return se(e);if(e.status==3)return;let n;e.type=="week"?n=await m(ye({weeklyAwardId:e.configId})):e.type=="day"&&(n=await m(ge({dailyAwardId:e.configId}))),n.code===0&&(w.value=!0,N.value=e.taskAwardAmount,g.value=e.taskTitle,B())},100)},W=v(null),ae=async e=>{W.value&&clearTimeout(W.value),W.value=setTimeout(async()=>{if([2,3].includes(e.status))return;if(e.status==0)return await T("Recharge");await m(he({id:e.id}))&&(w.value=!0,N.value=e.totalNumber==0?"0":(Math.floor(e.amount/e.totalNumber*100)/100).toString(),g.value=e.title,p())},100)},se=async e=>{if(e.taskId=="D20")return e.schedule<e.taskTarget?await T("Recharge"):y.push({name:"home"});if(!d[e.taskId].goPath)return;if(d[e.taskId].homeType&&sessionStorage.setItem("clickedGameType",d[e.taskId].homeType),d[e.taskId].goPath=="Recharge"||d[e.taskId].goPath=="Withdraw")return T(d[e.taskId].goPath);y.push({name:d[e.taskId].goPath})},ne=()=>{y.push({name:"DailyTasks-Record"})};return le(()=>C.value.isOpenActivityAward,e=>{e&&B()},{immediate:!0}),ie(()=>{p()}),(e,n)=>{var E;const _=R("svg-icon"),O=R("NavBar"),f=R("van-dialog"),A=ce("lazy");return c(),u("div",Ie,[r(O,{title:"",placeholder:!1,"left-arrow":"",onClickLeft:x},{right:j(()=>[t("div",{class:"navi-record",onClick:ne},[r(_,{name:"watchCollection"}),t("span",null,a(e.$t("awardsRecord")),1)])]),_:1}),t("div",Re,[t("div",null,[t("p",null,[t("div",Ce,a(e.$t("actTip1")),1),t("div",De,[t("div",null,a(e.$t("awardsTip1")),1),t("div",null,a(e.$t("awardsTip3")),1)])])])]),t("div",Ne,[i.value.length>0?(c(),u("div",Se,[t("div",Pe,[t("div",Le,a(e.$t("actTip3")),1),t("span",Be,a(ee((E=i.value[0])==null?void 0:E.status)),1)]),t("div",Me,[t("div",Ge,[r(_,{name:"actNewGift"}),t("div",null,a(i.value[0].title),1)]),t("div",je,a(i.value[0].receivedNumber+"/"+i.value[0].totalNumber),1)]),t("div",xe,a(i.value[0].description),1),t("div",ze,[t("div",null,a(e.$t("awardsAmount")),1),t("div",We,[r(_,{name:"activityWallet"}),t("span",null,a(h($)(i.value[0].amount)),1)])]),t("div",{class:I(["btn btnNew",`status${i.value[0].status}`]),onClick:n[0]||(n[0]=s=>ae(i.value[0]))},a(Z(i.value[0].status)),3)])):G("v-if",!0),(c(!0),u(H,null,K(o.value,(s,oe)=>(c(),u("div",{class:"task-item",key:oe},[t("div",Oe,[t("div",{class:I(["hearder-status",`${s.type}`])},a(s.type=="week"?e.$t("actTip4"):e.$t("dailyMission")),3),t("span",{class:I(s.status==2?"headerR":"headerGray")},a(Y(s.status)),3)]),s.taskId=="D20"?(c(),u("div",He,[t("div",Ee,[r(_,{name:h(d).A1.icon},null,8,["name"]),t("div",null,a(s.taskTitle),1)]),t("div",Ve,[t("span",null,a(e.$t("recharge")),1),t("span",Ue,a(s.schedule+"/"+s.taskTarget),1)]),t("div",qe,[t("span",null,a(e.$t("betting")),1),t("span",Fe,a(s.scheduleTwo+"/"+s.targetTwo),1)])])):(c(),u("div",Je,[t("div",{class:I(["type-title",[h(d)[s.taskId].icon]])},[r(_,{name:h(d)[s.taskId].icon},null,8,["name"]),t("div",null,a(s.taskTitle),1)],2),t("div",Ke,a(s.schedule+"/"+s.taskTarget),1)])),t("div",Qe,a(s.taskDescribe),1),t("div",Xe,[t("div",null,a(e.$t("awardsAmount")),1),s.receiveType==1?(c(),u("div",Ye,[r(_,{name:"activityWallet"}),t("span",null,a(h($)(s.taskAwardAmount)),1)])):(c(),u("div",Ze,[r(_,{name:"activityWallet"}),G(` <img v-lazy="getIcons('wallet', 'balance')" /> `),!s.displayRewardMinAmount||!s.displayRewardMaxAmount?(c(),u("span",et,a(h($)(s.taskAwardAmount)),1)):(c(),u(H,{key:1},[t("span",null,a(h($)(s.displayRewardMinAmount)),1),tt,t("span",null,a(h($)(s.displayRewardMaxAmount)),1)],64))]))]),s.status==2&&s.isReceiveButtonHidden?G("v-if",!0):(c(),u("div",{key:2,class:I(["btn btnOther",`status${s.status}`]),onClick:kt=>te(s)},a(X(s.status)),11,at))]))),128))]),r(f,{show:w.value,"onUpdate:show":n[3]||(n[3]=s=>w.value=s),"show-confirm-button":!1,className:"noOverHidden"},{default:j(()=>[t("div",st,[t("div",nt,[V(t("img",null,null,512),[[A,h(ke)("public","succeed")]]),t("div",ot,a(e.$t("awardsReceived")),1),t("div",lt,a(g.value),1),t("div",it,[r(_,{name:"receivedSuccessfuly"}),t("span",null,a(h($)(N.value)),1)]),t("div",{class:"dialog-btn",onClick:n[1]||(n[1]=s=>w.value=!1)},a(e.$t("confirm")),1),t("div",{class:"dialog-footer",onClick:n[2]||(n[2]=s=>w.value=!1)},[V(t("img",null,null,512),[[A,h(fe)("activity/DailyTask","close")]])])])])]),_:1},8,["show"])])}}});const dt=Q(ct,[["__scopeId","data-v-d7213382"],["__file","/usr/local/jenkins-prod/workspace/AR081-Pages-Bengal-dkwin/src/views/activity/DailyTasks/index.vue"]]),wt=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"})),ut={class:"task-record-container"},rt={class:"head"},vt={class:"record-panel van-clearfix"},pt={class:"markRed"},_t=U({__name:"index",setup(D){const{t:l}=q(),w=F(),y=v([]),d=v(!1),C=v(!1),b=v(1),T=v(!1),g=v(1),N=J(()=>T.value?"":l("noMoreThere")),i=async()=>{let o;g.value==1?o=await m(be({pageNo:b.value,pageSize:20})):o=await m(Te({pageNo:b.value,pageSize:20})),o?(T.value=o.data.totalCount==0,o.data.totalPage<=b.value?C.value=!0:C.value=!1,o.data.list&&(y.value.push(...o.data.list),y.value.sort((k,P)=>P.createDate-k.createDate)),b.value++):C.value=!0,d.value=!1},L=()=>{w.push({name:"DailyTasks"})};function S(o){g.value=o,b.value=1,y.value.length=0,i()}return(o,k)=>{const P=R("NavBar"),B=R("van-sticky"),x=R("svg-icon"),M=R("van-list");return c(),u("div",ut,[r(P,{title:o.$t("titlePickUpRecord"),placeholder:!1,"left-arrow":"",onClickLeft:L},null,8,["title"]),r(B,{"offset-top":49},{default:j(()=>[t("div",rt,[t("button",{class:I({active:g.value==1}),onClick:k[0]||(k[0]=p=>S(1))},a(o.$t("actTip7")),3),t("button",{class:I({active:g.value==2}),onClick:k[1]||(k[1]=p=>S(2))},a(o.$t("actTip8")),3)])]),_:1}),r(M,{loading:d.value,"onUpdate:loading":k[2]||(k[2]=p=>d.value=p),finished:C.value,"finished-text":N.value,onLoad:i},{default:j(()=>[t("div",vt,[(c(!0),u(H,null,K(y.value,p=>(c(),u("div",{class:"record-panel-item",key:p.status},[t("h1",null,a(g.value==1?o.$t("actTip5"):o.$t("actTip6")),1),t("h2",null,[t("span",null,a(p.taskTitle),1),t("span",pt,a(p.taskTarget+"/"+p.taskTarget),1)]),t("div",null,[t("span",null,a(p.createDate),1),t("h3",null,[r(x,{name:"activityWallet"}),t("span",null,a(h($)(p.awardAmount)),1)])])]))),128))])]),_:1},8,["loading","finished","finished-text"]),T.value?(c(),re(Ae,{key:0})):G("v-if",!0)])}}});const ht=Q(_t,[["__scopeId","data-v-40b81b7f"],["__file","/usr/local/jenkins-prod/workspace/AR081-Pages-Bengal-dkwin/src/views/activity/DailyTasks/Record/index.vue"]]),mt=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{mt as a,wt as i};
