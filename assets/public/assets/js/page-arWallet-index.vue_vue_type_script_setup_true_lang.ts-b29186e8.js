import{G as me,z as pe,R as fe,r as n,B as X,$ as ge,C as _e,H as A,I as w,Q as v,O as d,J as t,P as s,ap as M,ao as r,K as ye,M as be,av as g,u as O,q as $e,a4 as Ae,aC as Ce,aD as ke,N as h,aB as Se}from"./common.modules-f9fa5dc7.js";import{W as We}from"./page-arWallet-components-32db136a.js";import{a3 as Ie,G as Re,a4 as De,a5 as Ue,a6 as Ve,A as C,a7 as Te,a8 as Ne,a9 as Pe,g as Be,aa as Le,ab as Me}from"./page-activity-ActivityDetail-5a5f2722.js";import{D as Oe}from"./page-activity-Championship-a16bb0a5.js";const q=k=>(Ce("data-v-847764eb"),k=k(),ke(),k),qe={class:"ar_wallet"},Fe={key:0},Ge={key:0,class:"tab_list"},He={key:1},Ee={class:"quick_amount"},ze={class:"title"},Ke={class:"amount_list"},Qe=["onClick"],Je={class:"amount_input"},je=q(()=>t("span",null,"₹",-1)),Xe={key:2},Ye={class:"withdraw"},Ze={class:"amount_input"},xe=q(()=>t("span",null,"₹",-1)),ea={class:"balance"},aa={class:"withdraw_amount"},ta=q(()=>t("div",{class:"driverd"},null,-1)),sa={class:"tip"},la={key:3,class:"active_box"},oa={class:"active_txt"},na={class:"recharge_content"},ia={class:"gift"},ra={class:"pwd"},da={class:"red"},ua={class:"forgetPwd"},ca={class:"btnD"},va={class:"withdrawSuccess"},wa=["src"],ha={class:"t1"},ma=["innerHTML"],pa={class:"x-row x-column x-row-middle"},fa={class:"mb10"},ga={class:"span"},ka=me({__name:"index",setup(k){const{$state:Y}=Ie(),{t:m}=pe(),I=fe(),p=n(0),R=n(["100","1000","10000","100000","1000","1000000"]),F=n(-1),o=n(),D=n(!1),y=n(!1),S=n(!1),U=n(),G=n(),V=Re().getUserInfo,f=n(!1),T=n(!1),W=De(),i=n(),N=n(),b=n(!1);W.$subscribe((e,a)=>{T.value=a.isLoading,W.setLoading(T.value)});const{isArWalletActive:_,arWallet:P,getInfo:Z,goWallet:H}=Ue(),x=X(()=>Y.isOpenForgetPasswordSMSState),B=X(()=>{var e;return(e=G.value)==null?void 0:e.rechargetypelist[0]}),ee=async()=>{const e=await Ve(),a=await C(Te({payid:21,deviceType:e}));a&&(R.value=a.data.rechargetypelist[0].scope.split("|"),G.value=a.data),E()},E=async()=>{const e=await C(Ne());e.code===0&&(N.value=e.data)},ae=async()=>{const e=await C(Le({withdrawid:21}));e.code===0&&(i.value=e.data)},te=e=>{F.value=e,o.value=R.value[e]},se=()=>{var e;o.value=(e=P.value)==null?void 0:e.balance},le=()=>{var e,a;Number(o.value)<((e=i.value.withdrawalsrule)==null?void 0:e.minPrice)||Number(o.value)>((a=i.value.withdrawalsrule)==null?void 0:a.maxPrice)?(O(m("c2cState14")),o.value=void 0):V.amount<Number(o.value)?(O(m("amountError")),o.value=void 0):y.value=!0},oe=async()=>{let e={amount:Number(o.value),pwd:U.value,type:21,bid:i.value.withdrawalslist[0].bid};(await C(Me(e))).code===0&&(y.value=!1,S.value=!0)},ne=async()=>{var c,u;let e="&returnUrl="+encodeURIComponent("https://"+window.location.host+"/#/main"),a=((c=B.value)==null?void 0:c.paySendUrl)+"?tyid="+((u=B.value)==null?void 0:u.payTypeID)+"&amount="+o.value+"&uid="+V.userId+"&sign="+encodeURIComponent(V.sign)+e;window.location.href=encodeURI(a)};function ie(){I.push({name:"rpwd"})}const re=async()=>{var c;$e({message:m("loading")+"...",forbidClick:!0});const e={returnUrl:"https://"+window.location.host+"/#/main"},a=await C(Pe(e));if((a==null?void 0:a.code)===0){let u=((c=a==null?void 0:a.data)==null?void 0:c.walletActivationPageUrl)+"?memberId="+a.data.memberId+"&merchantCode="+a.data.merchantCode+"&timestamp="+a.data.timestamp;window.location.href=u}Ae()};function de(){I.push({name:"CustomerService"})}const ue=()=>{var e;if(N.value){b.value=!0;return}((e=P.value)==null?void 0:e.balance)>=Number(o.value)?D.value=!0:O(m("amountError"))},ce=()=>{window.location.href=N.value,b.value=!0},ve=e=>e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e+"";ge(()=>p.value,e=>{o.value=void 0,e===1?ae():E()}),_e(async()=>{try{W.setLoading(!0),I.currentRoute.value.query.type==="1"?f.value=!1:(await Z(),f.value=!0),_.value&&await ee()}catch{}finally{W.setLoading(!1)}});const we=()=>{var e,a,c,u,$;if(((e=i.value.withdrawalsrule)==null?void 0:e.canWithdrawAmount)===0)o.value=0;else{let L=((a=i.value.withdrawalsrule)==null?void 0:a.canWithdrawAmount)>=((c=i.value.withdrawalsrule)==null?void 0:c.maxPrice)?(u=i.value.withdrawalsrule)==null?void 0:u.maxPrice:($=i.value.withdrawalsrule)==null?void 0:$.canWithdrawAmount;o.value=L}};return(e,a)=>{var z,K,Q,J;const c=A("NavBar"),u=A("van-field"),$=A("van-action-sheet"),L=A("van-button"),he=A("van-popup");return h(),w("div",qe,[v(c,{title:"AR"+e.$t("wallet"),placeholder:!1,"left-arrow":"",onClickLeft:a[0]||(a[0]=l=>e.$router.push("/main"))},null,8,["title"]),T.value?r("v-if",!0):(h(),w("div",Fe,[v(We,{"is-active":d(_)&&f.value,arWallet:d(P),onGoWallet:a[1]||(a[1]=l=>d(H)("wallet/withdraw"))},null,8,["is-active","arWallet"]),d(_)&&f.value?(h(),w("div",Ge,[t("div",{class:M(["item",{active:p.value===0}]),onClick:a[2]||(a[2]=l=>p.value=0)},s(e.$t("recharge")),3),t("div",{class:M(["item",{active:p.value===1}]),onClick:a[3]||(a[3]=l=>p.value=1)},s(e.$t("withdraw")),3)])):r("v-if",!0),r(" recharge "),p.value===0&&d(_)&&f.value?(h(),w("div",He,[t("div",Ee,[t("div",ze,s(e.$t("selectRechargeAmount")),1),t("div",Ke,[(h(!0),w(ye,null,be(R.value,(l,j)=>(h(),w("div",{class:M(["amount",{active:F.value===j}]),onClick:ya=>te(j)}," ₹"+s(ve(Number(l))),11,Qe))),256))]),t("div",Je,[je,v(u,{modelValue:o.value,"onUpdate:modelValue":a[4]||(a[4]=l=>o.value=l),type:"digit",placeholder:d(m)("enterAmount")},{button:g(()=>[t("div",{class:"all_btn",onClick:se},s(e.$t("all")),1)]),_:1},8,["modelValue","placeholder"])])]),t("div",{class:"submit_btn",onClick:ue},s(e.$t("recharge")),1)])):r("v-if",!0),r(" withdraw "),p.value===1&&d(_)&&f.value?(h(),w("div",Xe,[t("div",Ye,[t("div",Ze,[xe,v(u,{modelValue:o.value,"onUpdate:modelValue":a[5]||(a[5]=l=>o.value=l),type:"digit",placeholder:d(m)("enterAmount")},{button:g(()=>[t("div",{class:"all_btn",onClick:we},s(e.$t("maxAmount")),1)]),_:1},8,["modelValue","placeholder"])]),t("div",ea,s(e.$t("accountBlance"))+"："+s(((z=i.value)==null?void 0:z.withdrawalsrule.canWithdrawAmount)||0),1),t("div",aa,s(e.$t("arWithdraw",[((K=i.value)==null?void 0:K.withdrawalsrule.amountofCode)||0])),1),ta,t("div",sa,[t("div",null,s(e.$t("minAmount"))+" "+s(((Q=i.value)==null?void 0:Q.withdrawalsrule.minPrice)||0),1),t("div",null,s(e.$t("maxAmount2"))+" "+s(((J=i.value)==null?void 0:J.withdrawalsrule.maxPrice)||0),1)])]),t("div",{class:"submit_btn",onClick:le},s(e.$t("withdraw")),1)])):r("v-if",!0),!f.value||!d(_)?(h(),w("div",la,[t("div",oa,s(e.$t("arbTip2")),1),t("div",{class:"submit_btn",onClick:re},s(e.$t("arActive")),1)])):r("v-if",!0)])),v($,{show:D.value,"onUpdate:show":a[6]||(a[6]=l=>D.value=l),title:d(m)("recharge")},{default:g(()=>{var l;return[t("div",na,[t("div",null,[t("span",null,s(e.$t("rechargeCount")),1),t("span",null,s(o.value)+"ARB",1)]),t("div",null,[t("span",null,s(e.$t("award")),1),t("span",ia,s(Number(o.value)*(((l=B.value)==null?void 0:l.rechargeRifts)||0)),1)]),t("div",null,[t("span",null,s(e.$t("rechageAmount")),1),t("span",null,s(o.value)+"ARB",1)]),t("div",{class:"confirm_recharge",onClick:ne},s(e.$t("confirmRecharge")),1)])]}),_:1},8,["show","title"]),r("输入密码弹窗"),v($,{show:y.value,"onUpdate:show":a[9]||(a[9]=l=>y.value=l),title:e.$t("safetyVerification")},{default:g(()=>[t("div",ra,[v(u,{class:"wd_pas",modelValue:U.value,"onUpdate:modelValue":a[7]||(a[7]=l=>U.value=l),maxlength:32,type:"password",placeholder:e.$t("withdrawDialogPh")},null,8,["modelValue","placeholder"]),t("span",da,s(e.$t("withdrawDialogDesc3")),1),t("div",ua,[x.value?(h(),w("span",{key:0,onClick:ie},s(e.$t("withdrawDialogDesc4")),1)):r("v-if",!0),t("div",{class:"service",onClick:de},s(e.$t("withdrawDialogDesc5")),1)]),t("div",ca,[t("button",{onClick:a[8]||(a[8]=()=>y.value=!1)},s(e.$t("withdrawDialogDesc6")),1),t("button",{onClick:oe},s(e.$t("withdrawDialogDesc7")),1)])])]),_:1},8,["show","title"]),v(Oe,{class:"successW",show:S.value,"onUpdate:show":a[10]||(a[10]=l=>S.value=l),isShowHeader:!1,cancelText:e.$t("close"),confirmText:e.$t("goArWallet"),onConfirm:a[11]||(a[11]=()=>{S.value=!1,d(H)("wallet/withdraw"),o.value=0})},{content:g(()=>[t("div",va,[t("img",{class:"success_img",src:d(Be)("wallet","ar_appeal")},null,8,wa),t("div",ha,"AR Pay "+s(e.$t("withdrawAppeal")),1),r(` <div class="t2">{{ $t('withdrawAr1') }}</div> `),r(` <div class="t2">{{ $t('withdrawAr2') }}</div> `),t("div",{class:"t4",innerHTML:e.$t("withdrawAr3")},null,8,ma),r(` <div class="t3">
						<span style="font-weight: 400">{{ $t('withdrawalA') }}</span> {{ amount }}ARB
					</div> `),r(` <div
						class="go_wallet"
						@click="
							() => {
								withdrawVisble = false
								goWallet()
								amount = 0
							}
						"
					>
						{{ $t('goArWallet') }}
					</div> `)])]),_:1},8,["show","cancelText","confirmText"]),v(he,{show:b.value,"onUpdate:show":a[13]||(a[13]=l=>b.value=l),position:"bottom",class:"x-popup-order","close-on-click-overlay":!0},{default:g(()=>[t("div",{class:"close",onClick:a[12]||(a[12]=l=>b.value=!1)}),t("div",pa,[t("p",fa,s(e.$t("haveArpayOrder")),1),t("div",ga,s(e.$t("haveArpayOrderTip")),1),v(L,{class:"btn x-btn",block:"",onClick:ce,type:"primary"},{default:g(()=>[Se(s(e.$t("goComplete")),1)]),_:1})])]),_:1},8,["show"])])}}});export{ka as _};
