import{G as z,aw as O,H as T,au as N,av as S,O as c,Z as j,az as X,N as x,J as s,ap as P,ar as Y,P as v,r as b,z as G,A as ee,B as se,I as D,aB as U,Q as f,ao as A,q as H,u as $,aC as J,aD as Q,p as F,R as ae,C as te,a7 as oe,a0 as le,F as ne}from"./common.modules-f9fa5dc7.js";import{ac as Z,_ as E,ad as K,y as ie,b as R,ae as de,af as M,ag as re,ah as ue,ai as ce}from"./page-activity-ActivityDetail-5a5f2722.js";function pe(t,h){let p={headers:{"Content-Type":t.file.type}};return new Promise((_,r)=>{Z.put(h,t.file,p).then(n=>{n&&_(n)}).catch(n=>{r(n)})})}function me(t){return Z.post("/ar-wallet/v4/apiCenter/generateFileUrl",t)}const ve=z({__name:"vsImgVideo",props:{show:{type:Boolean,default:!1,required:!0},auto:{type:Boolean,default:!1},contentClass:{type:String,default:""},btnText:{type:String,default:""}},emits:["update:show","close"],setup(t,{emit:h}){const p=t,{show:_}=O(p,h);return(r,n)=>{const w=T("van-popup");return x(),N(w,{show:c(_),"onUpdate:show":n[1]||(n[1]=g=>j(_)?_.value=g:null),round:"",style:X([{width:"80%"},{height:t.auto?"auto":"80%"}])},{default:S(()=>[s("div",{class:P(["vsImgVideo",t.contentClass])},[s("div",{class:P(["con",{auto:t.auto}])},[Y(r.$slots,"default",{},void 0,!0)],2),s("div",{class:"cmdB",onClick:n[0]||(n[0]=()=>{_.value=!1,h("close")})},v(t.btnText||r.$t("close")),1)],2)]),_:3},8,["show","style"])}}});const q=E(ve,[["__scopeId","data-v-14975d3c"],["__file","/usr/local/jenkins-prod/workspace/AR081-Pages-Bengal-dkwin/src/components/ArUPI/vsImgVideo.vue"]]),ge=t=>(J("data-v-d588317f"),t=t(),Q(),t),fe={class:"updaloadImage"},_e={class:"img"},we={class:"title mb12 x-row x-row-between x-row-middle"},he=ge(()=>s("span",{style:{color:"#ee4d4d"}},"*",-1)),ye={class:"uploadImg x-row x-column x-row-middle-center"},be={class:"tip-p mt5 pb10"},Ie={class:"img video"},Ve={class:"title mb12 x-row x-row-between x-row-middle"},Ue={class:"uploadImg x-row x-column x-row-middle-center"},Te={key:0,class:"videoBox"},ke=["src"],$e=["src"],xe={controls:""},Le=["src"],Se=["src"],Ce=["src"],Be=z({__name:"uploadImage",props:{fileListImg:{type:null,required:!0},fileListVideo:{type:null,required:!0},readonly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!0,default:!1}},emits:["update:fileListImg","update:fileListVideo"],setup(t,{emit:h}){const p=t,{goMerchant:_}=K(),r=b(!1),n=b(""),{localStore:w}=re(),{fileListImg:g,fileListVideo:d}=O(p,h),{t:I}=G(),B=ie(),y=ee({baseUrl:"",signedUrl:""}),C=()=>{r.value=!1,y.baseUrl="",d.value=[],n.value=""},o=b(!1),l=b(!1),i=async(a,e)=>{const V=H({message:I("upLoaderL"),forbidClick:!0,duration:0,overlay:!0}),k=de()+"."+M(a.file.type);try{const L=w.get("ar_p_t")||"",m=await me({token:L,objectName:k,contentType:a.file.type});m.code==="1"&&(y.baseUrl=m.data.baseUrl,y.signedUrl=m.data.signedUrl,await pe(a,m.data.signedUrl)?(a.file.objectName=k,a.file.objectSuffix=M(a.file.type),(e==null?void 0:e.name)===2&&(n.value=k,r.value=!0)):($(m.msg),setTimeout(()=>{_()},1500)))}catch{}finally{V.close()}},u=se(()=>[R("arupi","vsImg","jpg"),`${B.getOSSUrl}/vsvideo/vsVideo.mp4`]);return(a,e)=>{const V=T("van-image"),k=T("van-uploader"),L=T("van-icon");return x(),D("div",fe,[s("div",_e,[s("div",we,[s("h1",null,[he,U(v(a.$t("sellTip13",[c(g).length])),1)]),s("div",{class:"right",onClick:e[0]||(e[0]=()=>o.value=!0)},v(a.$t("vsImg")),1)]),f(k,{disabled:a.disabled,"after-read":i,modelValue:c(g),"onUpdate:modelValue":e[1]||(e[1]=m=>j(g)?g.value=m:null),"max-count":3,"max-size":5e3*1024,onOversize:e[2]||(e[2]=()=>c(F)(a.$t("sellTip14"))),accept:"image/*",readonly:a.readonly,name:1},{default:S(()=>[s("div",ye,[f(V,{width:"25",height:"25",fit:"cover",src:c(R)("arupi","updateImg")},null,8,["src"]),U(" "+v(a.$t("uploadImage")),1)])]),_:1},8,["disabled","modelValue","readonly"]),s("div",be,[f(L,{name:"warning",color:"#F63E3E",class:"img"}),U(" "+v(a.$t("sellTip15")),1)])]),s("div",Ie,[s("div",Ve,[s("h1",null,v(a.$t("sellTip16",[c(d).length])),1),s("div",{class:"right",onClick:e[3]||(e[3]=()=>l.value=!0)},v(a.$t("vsVideo")),1)]),U(" "+v(n.value)+" ",1),f(k,{disabled:a.disabled,"after-read":i,modelValue:c(d),"onUpdate:modelValue":e[4]||(e[4]=m=>j(d)?d.value=m:null),"max-count":1,"max-size":5e4*1024,onOversize:e[5]||(e[5]=()=>c(F)(a.$t("sellTip17"))),accept:"video/*",readonly:a.readonly,name:2,"preview-image":!1},{default:S(()=>[s("div",Ue,[f(V,{width:"25",height:"25",fit:"contain",src:c(R)("arupi","video1")},null,8,["src"]),U(" "+v(a.$t("UploadVideo")),1)])]),_:1},8,["disabled","modelValue","readonly"]),r.value||c(d).length>0?(x(),D("div",Te,[s("div",{class:"del",onClick:C},[f(L,{class:"icon",name:"cross"})]),s("video",{class:"v",controls:"",src:c(d)[0].url?c(d)[0].url:(y==null?void 0:y.baseUrl)+n.value},null,8,ke)])):A("v-if",!0)]),o.value?(x(),N(q,{key:0,show:o.value,"onUpdate:show":e[6]||(e[6]=m=>o.value=m)},{default:S(()=>[s("img",{src:u.value[0]},null,8,$e)]),_:1},8,["show"])):A("v-if",!0),l.value?(x(),N(q,{key:1,show:l.value,"onUpdate:show":e[7]||(e[7]=m=>l.value=m)},{default:S(()=>[s("video",xe,[s("source",{src:u.value[1],type:"video/ogg"},null,8,Le),s("source",{src:u.value[1],type:"video/mp4"},null,8,Se),s("source",{src:u.value[1],type:"video/webm"},null,8,Ce)])]),_:1},8,["show"])):A("v-if",!0)])}}});const Ae=E(Be,[["__scopeId","data-v-d588317f"],["__file","/usr/local/jenkins-prod/workspace/AR081-Pages-Bengal-dkwin/src/components/ArUPI/uploadImage.vue"]]),W=t=>(J("data-v-a2909dfe"),t=t(),Q(),t),Re={class:"appeal"},Ne={class:"appealTip"},je={class:"title"},Pe=W(()=>s("h1",null,[s("span",{style:{color:"#EE4D4D"}},"*"),U(" UTR(UPI Ref.ID)")],-1)),De=W(()=>s("span",{style:{color:"#EE4D4D"}},"*",-1)),ze=z({__name:"index",setup(t){const{goMerchant:h}=K(),{t:p}=G(),_=ae(),r=b("");function n(){_.push({name:"kycAppeal"})}const w=b([]),g=b([]);te(()=>{B()});const d=b(!1),I=b(),B=async()=>{const o=await ue({});if(o.code==="1"){const{existAppeal:l,appealReason:i,images:u,video:a,url:e}=o.data;d.value=l,r.value=i,I.value=e,w.value=u?u.split(",").map(V=>({url:V})):[],g.value=a?a.split(",").map(V=>({url:V})):[]}else $(o.msg),setTimeout(()=>{h()},1500)},y=o=>o.map(i=>{if(i.url)return i.url.split("/").pop();if(i.file&&i.file.objectName)return i.file.objectName}),C=oe(async()=>{if(d.value)return;if(!I.value||I.value.length<12)return $(p("formatIncorrect"));if(!r.value)return $(p("sellTip3"));if(w.value.length<1)return $(p("sellTip15"));await le({title:p("notice"),message:p("appealTip")});const o=H({message:p("submitting"),forbidClick:!0,duration:0,overlay:!0});let l=[],i=[];w.value.length>0&&(l=y(w.value)),g.value.length>0&&(i=y(g.value));try{const u=await ce({appealReason:r.value,video:i?i[0]:"",images:l.join(","),utr:I.value});setTimeout(()=>{o.close()},2e3),u.code==="1"?ne({message:p("SubmittedS"),wordBreak:"break-word"}):$(u.msg),setTimeout(()=>{h()},1500)}catch(u){console.log(u),o.close()}},1e3);return(o,l)=>{const i=T("NavBar"),u=T("van-icon"),a=T("van-field");return x(),D("div",Re,[f(i,{title:o.$t("Appeal"),placeholder:!1,"left-arrow":"",onClickLeft:n},null,8,["title"]),s("div",Ne,[s("div",je,[f(u,{name:"warning",class:"img",size:"14"}),U(v(o.$t("notice")),1)]),s("p",null,v(o.$t("appealTip")),1)]),Pe,f(a,{disabled:d.value,modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value=e),modelModifiers:{trim:!0},label:"",type:"text",maxlength:"12",placeholder:o.$t("enterUtr")},null,8,["disabled","modelValue","placeholder"]),s("h1",null,[De,U(" "+v(o.$t("ReasonFAppeal")),1)]),f(a,{disabled:d.value,modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),modelModifiers:{trim:!0},rows:"2",label:"",type:"textarea",maxlength:"60","show-word-limit":"",placeholder:o.$t("sellTip3")},null,8,["disabled","modelValue","placeholder"]),f(Ae,{disabled:d.value,fileListImg:w.value,"onUpdate:fileListImg":l[2]||(l[2]=e=>w.value=e),fileListVideo:g.value,"onUpdate:fileListVideo":l[3]||(l[3]=e=>g.value=e)},null,8,["disabled","fileListImg","fileListVideo"]),s("div",{class:P(["cmdBth mt16 x-row x-row-middle-center",d.value?"":"active"]),onClick:l[4]||(l[4]=(...e)=>c(C)&&c(C)(...e))},v(o.$t("selltip4")),3)])}}});const Ee=E(ze,[["__scopeId","data-v-a2909dfe"],["__file","/usr/local/jenkins-prod/workspace/AR081-Pages-Bengal-dkwin/src/views/arupi/Appeal/index.vue"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"}));export{me as P,q as V,Oe as i,pe as u};
